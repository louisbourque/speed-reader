function onKeyPress(e){cancelReadText()}function updateWPM(){!isNaN(app.wpmInput.value)&&app.wpmInput.value>0&&(app.wpm=1*app.wpmInput.value)}function FileDragHover(e){e.stopPropagation(),e.preventDefault(),app.dropTarget.className="dragover"==e.type?"hover":""}function FileSelectHandler(e){FileDragHover(e),app.error.innerHTML="",app.output.innerHTML="";for(var t,a=e.target.files||e.dataTransfer.files,r=0;t=a[r];r++)console.log(t),""!=t.type!=""&&"text"!=t.type.substring(0,4)?app.error.innerHTML+="Unsupported file type: "+t.name+" ("+t.type+")<br>":loadTextFromFile(t)}function loadTextFromFile(e){var t=new FileReader;t.onload=function(e){app.textToRead.value=e.target.result},t.readAsText(e)}function readText(){app.textArray=app.textToRead.value.trim().split(" "),app.textArray.push(""),app.interval&&clearInterval(app.interval),app.readerOverlay.style.display="table",app.interval=setInterval("incrementReadText()",60/app.wpm*1e3)}function incrementReadText(){return app.textArray.length<=0?void cancelReadText():void(app.readerText.innerText=app.textArray.shift())}function cancelReadText(){app.readerOverlay.style.display="none",clearInterval(app.interval),app.readerText.innerText=""}var app=app||{};app.fileselect=document.getElementById("file-select-input"),app.error=document.getElementById("error"),app.output=document.getElementById("output"),app.dropTarget=document.getElementById("filedrag"),app.textToRead=document.getElementById("inputtext"),app.readerOverlay=document.getElementById("reader-overlay"),app.readerText=document.getElementById("reader-text"),app.wpmInput=document.getElementById("wpm-input"),app.textArray=[],app.interval=0,app.wpm=300,window.File&&window.FileList&&window.FileReader&&(app.fileselect.addEventListener("change",FileSelectHandler,!1),document.addEventListener("dragover",FileDragHover,!1),document.addEventListener("dragleave",FileDragHover,!1),document.addEventListener("drop",FileSelectHandler,!1),document.addEventListener("keypress",onKeyPress,!1),document.getElementById("filedrag").style.display="block");